(this.webpackJsonptensorflow=this.webpackJsonptensorflow||[]).push([[0],{293:function(e,t){},294:function(e,t){},302:function(e,t){},308:function(e,t){},309:function(e,t){},314:function(e,t,n){"use strict";n.r(t);var r,a,c,i=n(12),o=n.n(i),s=n(257),u=n.n(s),l=n(316),d=n(2),b=n.n(d),h=n(11),f=n(5),j=n(258),p=n(276),m=n(160),x=n(46),O=n(315),v=n(22),g=function(){return Object(v.jsx)(O.a,{p:4,children:"Choose one from the menu above"})},y=n(97),w=function(e){var t=e.modelMobilenet,n=Object(i.useRef)(null),r=Object(i.useState)(!1),a=Object(f.a)(r,2),c=a[0],o=a[1],s=Object(i.useState)(),u=Object(f.a)(s,2),l=u[0],d=u[1],j=Object(i.useCallback)((function(e){(function(){var e=Object(h.a)(b.a.mark((function e(n){var r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return d(void 0),e.abrupt("return");case 3:return e.prev=3,o(!0),e.next=7,t.classify(n);case 7:r=e.sent,a=r.map((function(e,t){return Object(v.jsxs)(O.a,{children:[Object(v.jsx)("b",{children:e.className})," - ","".concat(Math.round(100*e.probability),"%")]},t)})),d(a),o(!1),n.dispose(),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(3),o(!1),d(void 0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}})()(e)}),[t]),p=function(){var e=Object(h.a)(b.a.mark((function e(){var t,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.current){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,y.a.webcam(n.current);case 5:return t=e.sent,e.next=8,t.capture();case 8:r=e.sent,j(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=function(){var e=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.webcam(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();n.current&&e(n.current)}),[n]),Object(v.jsxs)(O.a,{p:4,children:[Object(v.jsx)(O.a,{children:Object(v.jsx)("video",{style:{transform:"scaleX(-1)"},width:768,height:576,ref:n})}),Object(v.jsx)(O.b,{onClick:p,variant:"primary",children:"Capture"}),c&&Object(v.jsx)(O.a,{children:"loading"}),l&&Object(v.jsx)(O.a,{mt:3,children:l})]})},k=function(e){var t=e.modelMobilenet,n=(e.modelKnn,Object(i.useRef)(null)),r=Object(i.useState)(!1),a=Object(f.a)(r,2),c=a[0],o=a[1],s=Object(i.useState)(0),u=Object(f.a)(s,2),l=u[0],d=u[1],j=Object(i.useState)(),p=Object(f.a)(j,2),m=p[0],x=p[1],g=Object(i.useCallback)((function(e){(function(){var e=Object(h.a)(b.a.mark((function e(n){var r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return o(!1),x(void 0),e.abrupt("return");case 4:return e.prev=4,o(!0),e.next=8,t.classify(n);case 8:r=e.sent,a=r.map((function(e,t){return Object(v.jsxs)(O.a,{children:[Object(v.jsx)("b",{children:e.className})," - ","".concat(Math.round(100*e.probability),"%")]},t)})),x(a),o(!1),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(4),o(!1),x(void 0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}})()(e)}),[t]);return Object(v.jsx)(O.a,{p:4,children:t&&Object(v.jsxs)(O.a,{sx:{width:1e3},children:[Object(v.jsx)(O.a,{sx:{height:700},children:Object(v.jsx)(O.e,{onLoad:function(){n.current&&g(n.current)},ref:n,alt:"cat",crossOrigin:"anonymous",src:"https://picsum.photos/1000/700"},l)}),Object(v.jsx)(O.a,{mt:3,children:c?"loading":m||""}),!c&&Object(v.jsx)(O.b,{mt:3,variant:"primary",onClick:function(){o(!0),x(void 0),d(l+1)},children:"reload"})]})})},S=n(20),C=["left","up","down","center","right"].sort((function(e,t){return e.localeCompare(t)})),F=function(e){var t=e.modelMobilenet,n=e.modelKnn,a=Object(i.useRef)(null),c=Object(i.useState)(),o=Object(f.a)(c,2),s=o[0],u=o[1],l=Object(i.useState)(),d=Object(f.a)(l,2),j=d[0],p=d[1],m=Object(i.useState)(!1),x=Object(f.a)(m,2),g=x[0],w=x[1],k=Object(i.useState)([]),F=Object(f.a)(k,2),M=F[0],W=F[1],E=Object(i.useState)(!1),A=Object(f.a)(E,2),H=A[0],L=A[1];Object(i.useEffect)((function(){var e=function(){var e=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u,e.next=3,y.a.webcam(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.current&&e(a.current),function(){z()}}),[a]);var z=function(){r&&window.cancelAnimationFrame(r),r=void 0},P=function(){var e=Object(h.a)(b.a.mark((function e(r){var a,c,i,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(!0),a=0;case 2:if(!(a<15)){e.next=14;break}return e.next=5,s.capture();case 5:return c=e.sent,(i=null===t||void 0===t?void 0:t.infer(c))&&(null===n||void 0===n||n.addExample(i,r)),c.dispose(),a++,e.next=12,Object(y.c)();case 12:e.next=2;break;case 14:o=[].concat(Object(S.a)(M),[r]).sort((function(e,t){return e.localeCompare(t)})),W(o),w(!1),o.toString()===C.toString()&&L(!0);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(h.a)(b.a.mark((function e(){var a,c,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:if(!(n.getNumClasses()>0)){e.next=12;break}return e.next=5,s.capture();case 5:return a=e.sent,c=null===t||void 0===t?void 0:t.infer(a),e.next=9,null===n||void 0===n?void 0:n.predictClass(c);case 9:i=e.sent,p(Object(v.jsxs)(O.a,{children:[Object(v.jsx)(O.a,{mb:2,sx:{fontWeight:"bold"},children:i.label}),Object.keys(i.confidences).map((function(e,t){return Object(v.jsxs)(O.a,{children:[e,": ",i.confidences[e]]},t)}))]})),a.dispose();case 12:r=window.requestAnimationFrame(I);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)(O.a,{p:4,children:Object(v.jsxs)(O.a,{sx:{mx:"auto",textAlign:"center",maxWidth:768},children:[Object(v.jsx)(O.a,{children:Object(v.jsx)("video",{style:{transform:"scaleX(-1)"},width:768,height:576,ref:a})}),Object(v.jsxs)(O.a,{mt:3,sx:{opacity:g?.5:1,pointerEvents:g?"none":"visible"},children:[!H&&Object(v.jsxs)(O.a,{children:[Object(v.jsx)(O.h,{children:"Teach the machine all angles of your face"}),Object(v.jsxs)(O.c,{sx:{mt:3,justifyContent:"space-between"},children:[Object(v.jsx)(O.b,{onClick:function(){return P("left")},variant:"secondary",children:"Left"}),Object(v.jsx)(O.b,{onClick:function(){return P("up")},variant:"secondary",children:"Up"}),Object(v.jsx)(O.b,{onClick:function(){return P("center")},variant:"secondary",children:"Center"}),Object(v.jsx)(O.b,{onClick:function(){return P("down")},variant:"secondary",children:"Down"}),Object(v.jsx)(O.b,{onClick:function(){return P("right")},variant:"secondary",children:"Right"})]})]}),H&&Object(v.jsx)(O.b,{onClick:function(){I()},mt:5,children:"Detect head position"})]}),Object(v.jsx)(O.a,{mt:3,children:j})]})})},M=n(213),W=0,E=468,A="#157AB3",H=500,L=function(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))},z=function(){var e=Object(i.useRef)(null),t=Object(i.useRef)(null),n=Object(i.useCallback)(Object(h.a)(b.a.mark((function t(){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(c&&e.current&&a)){t.next=6;break}return t.next=3,c.estimateFaces({returnTensors:!1,flipHorizontal:!1,input:e.current});case 3:r=t.sent,a.drawImage(e.current,0,0,H,H,0,0,H,H),r.forEach((function(e){var t=e.mesh;a.fillStyle=A;for(var n=0;n<E;n++){var r=t[n][0],c=t[n][1];a.beginPath(),a.arc(r,c,1,0,2*Math.PI),a.fill()}if(t.length>E){a.strokeStyle="#FF2C35",a.lineWidth=1;var i=t[468],o=L(t[472],t[470]),s=L(t[471],t[469]);if(a.beginPath(),a.ellipse(i[0],i[1],s/2,o/2,0,0,2*Math.PI),a.stroke(),t.length>473){var u=t[473],l=L(t[475],t[477]),d=L(t[476],t[474]);a.beginPath(),a.ellipse(u[0],u[1],d/2,l/2,0,0,2*Math.PI),a.stroke()}}}));case 6:W=requestAnimationFrame(n);case 7:case"end":return t.stop()}}),t)}))),[]),r=Object(i.useCallback)(Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.b(M.a.mediapipeFacemesh);case 2:c=e.sent,n();case 4:case"end":return e.stop()}}),e)}))),[n]),o=Object(i.useCallback)(function(){var e=Object(h.a)(b.a.mark((function e(n){var c,i,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:H,height:H}});case 3:i=e.sent,(a=null===t||void 0===t||null===(c=t.current)||void 0===c?void 0:c.getContext("2d")).translate(H,0),a.scale(-1,1),a.fillStyle=A,a.strokeStyle=A,a.lineWidth=.5,o=function e(){n.removeEventListener("loadedmetadata",e),r()},n.addEventListener("loadedmetadata",o),n.srcObject=i,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),[r]);return Object(i.useEffect)((function(){return e.current&&t.current&&(console.log("useEffect"),o(e.current)),function(){cancelAnimationFrame(W)}}),[o]),Object(v.jsx)(O.a,{p:4,children:Object(v.jsxs)(O.a,{sx:{position:"relative"},children:[Object(v.jsx)("video",{autoPlay:!0,style:{transform:"scaleX(-1)",visibility:"hidden",width:"auto",height:"auto"},ref:e}),Object(v.jsx)("canvas",{ref:t,style:{position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)"},width:H,height:H})]})})},P=n(280),I=[{path:"/",component:g,name:"Home",exact:!0},{path:"/tensorflow-study/image-detection",component:k,name:"Random Image Detection"},{path:"/tensorflow-study/webcam",component:w,name:"Webcam"},{path:"/tensorflow-study/transfer-learning",component:F,name:"Transfer Learning"},{path:"/tensorflow-study/sentiment",component:function(){var e=Object(i.useState)(),t=Object(f.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(),c=Object(f.a)(a,2),o=c[0],s=c[1],u=Object(i.useState)(),l=Object(f.a)(u,2),d=l[0],j=l[1],p=Object(i.useState)(!1),m=Object(f.a)(p,2),x=m[0],g=m[1],w=Object(i.useState)(!1),k=Object(f.a)(w,2),S=k[0],C=k[1],F=Object(i.useState)(),M=Object(f.a)(F,2),W=M[0],E=M[1],A=Object(i.useState)(),H=Object(f.a)(A,2),L=H[0],z=H[1],I=Object(i.useState)("This is really the most useless talk I have ever watched"),T=Object(f.a)(I,2),R=T[0],_=T[1],B=function(){var e=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.t0=s,e.next=4,Object(P.a)(.9,[]);case 4:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=r,e.next=9,Object(y.b)("https://storage.googleapis.com/tfjs-models/tfjs/sentiment_cnn_v1/model.json");case 9:return e.t3=e.sent,(0,e.t2)(e.t3),e.t4=j,e.next=14,fetch("https://storage.googleapis.com/tfjs-models/tfjs/sentiment_cnn_v1/metadata.json");case 14:return e.next=16,e.sent.json();case 16:e.t5=e.sent,(0,e.t4)(e.t5),g(!1);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(h.a)(b.a.mark((function e(t){var r,a,c,i,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),d&&n){e.next=3;break}return e.abrupt("return");case 3:return C(!0),E(void 0),z(void 0),r=R.trim().toLowerCase().replace(/(\.|,|!\?)/g,"").split(" "),a=r.map((function(e){var t=d.word_index[e];return"undefined"===typeof t?2:t+d.index_from})),c=new Array(d.max_len-a.length).fill(0).concat(a),i=Object(y.d)(c,[1,d.max_len]),s=n.predict(i),E(s.dataSync()[0]),s.dispose(),e.t0=z,e.next=16,null===o||void 0===o?void 0:o.classify([R]);case 16:e.t1=e.sent,(0,e.t0)(e.t1),C(!1);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){B()}),[]),Object(v.jsxs)(O.a,{p:4,children:[x&&Object(v.jsx)(O.h,{children:"Loading Sentiment and Toxicity models"}),!x&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(O.d,{as:"h2",children:"Sentiment analysis"}),Object(v.jsxs)(O.a,{as:"form",sx:{position:"relative"},onSubmit:D,children:[Object(v.jsx)(O.f,{maxLength:100,autoComplete:"off",mt:3,onChange:function(e){_(e.currentTarget.value)},value:R,name:"input"}),Object(v.jsxs)(O.a,{sx:{position:"absolute",bottom:-25,right:"2px",fontSize:0},children:[R.length,"/100"]})]}),W&&L&&Object(v.jsxs)(O.a,{mt:2,children:[Object(v.jsxs)(O.h,{children:[Object(v.jsx)(O.d,{mt:4,as:"h3",children:"Sentiment Score:"}),Object(v.jsx)(O.h,{as:"span",mt:3,sx:{color:W>.66?"green":W<.33?"red":"orange"},children:W})]}),Object(v.jsxs)(O.h,{mt:2,children:[Object(v.jsx)(O.d,{mt:4,as:"h3",children:"Toxicity:"}),null===L||void 0===L?void 0:L.map((function(e,t){return Object(v.jsxs)(O.a,{mt:2,pl:3,sx:{opacity:e.results.every((function(e){return e.match}))?1:.4},children:[Object(v.jsx)("b",{children:e.label}),":",e.results.map((function(e,t){return Object(v.jsxs)(O.a,{mt:2,children:[Object(v.jsxs)(O.h,{sx:{pl:4},children:["Probabilities: ",JSON.stringify(e.probabilities)]}),Object(v.jsxs)(O.h,{sx:{pl:4},children:["Match:"," ",Object(v.jsx)(O.h,{as:"span",sx:{color:e.match?"green":"text",fontWeight:e.match?"bold":"normal"},children:JSON.stringify(e.match)})]})]},t)}))]},t)}))]})]}),Object(v.jsx)(O.b,{sx:{opacity:S?.4:1,pointerEvents:S?"none":"visible"},mt:4,onClick:D,children:S?"Loading...":"Analyse"})]})]})},name:"Sentiment Analysis"},{path:"/tensorflow-study/facemesh",component:z,name:"Face Mesh"}],T=n(214),R=n(283),_=O.g,B=function(e){var t=e.children,n=Object(R.a)(e,["children"]);return Object(v.jsx)(_,Object(T.a)(Object(T.a)({as:m.b},n),{},{children:t}))},D=function(){var e=Object(x.f)();return Object(v.jsx)(O.c,{as:"nav",sx:{px:3,py:4,bg:"muted"},children:I.map((function(t){return Object(v.jsx)(B,{variant:e.pathname===t.path?"navActive":"nav",to:t.path,children:t.name},t.name)}))})},N=function(){var e=Object(i.useState)(),t=Object(f.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(),c=Object(f.a)(a,2),o=c[0],s=c[1],u=Object(i.useState)(!1),l=Object(f.a)(u,2),d=l[0],g=l[1],y=function(){var e=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=r,e.next=4,j.a();case 4:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=s,e.next=9,p.a();case 9:e.t3=e.sent,(0,e.t2)(e.t3),e.next=17;break;case 13:e.prev=13,e.t4=e.catch(0),console.log(e.t4),g(!0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){y()}),[]),Object(v.jsxs)(m.a,{children:[Object(v.jsx)(D,{}),d?Object(v.jsx)(O.a,{p:3,children:"Error loading Model"}):Object(v.jsx)(v.Fragment,{children:n&&o?Object(v.jsx)(x.c,{children:I.map((function(e,t){var r=e.exact,a=e.path,c=e.component;return Object(v.jsx)(x.a,{exact:r,path:a,children:Object(v.jsx)(c,{modelMobilenet:n,modelKnn:o})},t)}))}):Object(v.jsx)(O.a,{p:3,children:"Loading Models"})})]})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,317)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},X={space:[0,4,8,16,32,64,128,256,512],fonts:{body:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", sans-serif',heading:"inherit",monospace:"Menlo, monospace"},fontSizes:[12,14,16,20,24,32,48,64,96],fontWeights:{body:400,heading:700,bold:700},lineHeights:{body:1.5,heading:1.125},buttons:{primary:{cursor:"pointer"},secondary:{bg:"secondary",color:"white",cursor:"pointer"}},colors:{text:"#000",background:"#fff",primary:"#07c",secondary:"#30c",muted:"#f6f6f6"},links:{nav:{mr:4},navActive:{variant:"links.nav",color:"secondary",pointerEvents:"none"}},styles:{root:{fontFamily:"body",lineHeight:"body",fontWeight:"body"},h1:{color:"text",fontFamily:"heading",lineHeight:"heading",fontWeight:"heading",fontSize:5},h2:{color:"text",fontFamily:"heading",lineHeight:"heading",fontWeight:"heading",fontSize:4},h3:{color:"text",fontFamily:"heading",lineHeight:"heading",fontWeight:"heading",fontSize:3},h4:{color:"text",fontFamily:"heading",lineHeight:"heading",fontWeight:"heading",fontSize:2},h5:{color:"text",fontFamily:"heading",lineHeight:"heading",fontWeight:"heading",fontSize:1},h6:{color:"text",fontFamily:"heading",lineHeight:"heading",fontWeight:"heading",fontSize:0},p:{color:"text",fontFamily:"body",fontWeight:"body",lineHeight:"body"},a:{color:"primary"},pre:{fontFamily:"monospace",overflowX:"auto",code:{color:"inherit"}},code:{fontFamily:"monospace",fontSize:"inherit"},table:{width:"100%",borderCollapse:"separate",borderSpacing:0},th:{textAlign:"left",borderBottomStyle:"solid"},td:{textAlign:"left",borderBottomStyle:"solid"},img:{maxWidth:"100%"}}};u.a.render(Object(v.jsx)(o.a.StrictMode,{children:Object(v.jsx)(l.a,{theme:X,children:Object(v.jsx)(N,{})})}),document.getElementById("root")),J()}},[[314,1,2]]]);
//# sourceMappingURL=main.8397b09f.chunk.js.map