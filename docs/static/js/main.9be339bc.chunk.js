(this.webpackJsonptensorflow=this.webpackJsonptensorflow||[]).push([[0],{307:function(e,t){},308:function(e,t){},316:function(e,t){},323:function(e,t){},324:function(e,t){},337:function(e){e.exports=JSON.parse('{"name":"tensorflow","version":"0.1.0","homepage":"/","private":true,"dependencies":{"@tensorflow-models/coco-ssd":"^2.2.1","@tensorflow-models/face-landmarks-detection":"0.0.1","@tensorflow-models/handpose":"^0.0.7","@tensorflow-models/knn-classifier":"^1.2.2","@tensorflow-models/mobilenet":"^2.0.4","@tensorflow-models/speech-commands":"^0.5.2","@tensorflow-models/toxicity":"^1.2.2","@tensorflow/tfjs":"^3.1.0","@tensorflow/tfjs-backend-wasm":"^3.2.0","@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.1.0","@testing-library/user-event":"^12.1.10","@types/jest":"^26.0.15","@types/node":"^12.0.0","@types/react":"^17.0.0","@types/react-dom":"^17.0.0","dat.gui":"^0.7.7","react":"^17.0.1","react-dom":"^17.0.1","react-router-dom":"^5.2.0","react-scripts":"4.0.2","theme-ui":"^0.3.5","three":"^0.125.2","typescript":"^4.1.2","web-vitals":"^1.0.1"},"scripts":{"start":"react-scripts start","build":"rm -rf docs && react-scripts build && mv build docs","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@types/dat.gui":"^0.7.6","@types/react-router-dom":"^5.1.7","@types/theme-ui":"^0.3.7"}}')},338:function(e,t,n){"use strict";n.r(t);var a,r,c,s,o,i,l,u,d,b,j,h,f=n(12),p=n.n(f),x=n(265),m=n.n(x),O=n(340),g=n(167),v=n(49),y=n(339),w=n(17),k=function(){return Object(w.jsxs)(y.c,{as:"section",variant:"layout.section",children:[Object(w.jsx)(y.f,{as:"h2",children:"Hello World"}),Object(w.jsxs)(y.n,{children:["This is a series of Machine Learning experiments using"," ",Object(w.jsx)(y.j,{href:"https://www.tensorflow.org/js",target:"_blank",children:"TensorFlow.js"}),","," ",Object(w.jsx)(y.j,{href:"https://threejs.org",target:"_blank",children:"Three.js"}),","," ",Object(w.jsx)(y.j,{href:"https://reactjs.org",target:"_blank",children:"React"})," ","and"," ",Object(w.jsx)(y.j,{href:"https://theme-ui.com",target:"_blank",children:"Theme-ui"})," ","by"," ",Object(w.jsx)(y.j,{variant:"text",href:"https://s2paganini.com",target:"_blank",children:"Silvio Paganini"}),"."]}),Object(w.jsxs)(y.n,{children:[Object(w.jsx)(y.n,{as:"span",sx:{color:"green"},children:"\u2190"})," ","Choose the experiments on the left menu to start \u26a1"]}),Object(w.jsx)(y.d,{}),Object(w.jsx)(y.f,{as:"h3",variant:"styles.h3",sx:{mt:4},children:"How to run it locally"}),Object(w.jsxs)(y.n,{children:[Object(w.jsx)(y.n,{as:"span",sx:{color:"green"},children:"1)"})," ","Clone the git repository"," ",Object(w.jsx)(y.a,{as:"pre",variant:"styles.pre",children:Object(w.jsx)("code",{children:"$ git clone git@github.com:silviopaganini/tensorflow-study.git"})})]}),Object(w.jsxs)(y.n,{children:[Object(w.jsx)(y.n,{as:"span",sx:{color:"green"},children:"2)"})," ","Install the packages and run",Object(w.jsx)(y.a,{as:"pre",variant:"styles.pre",children:Object(w.jsxs)("code",{children:["$ yarn install",Object(w.jsx)("br",{}),"$ yarn start"]})})]}),Object(w.jsx)(y.f,{as:"h3",variant:"styles.h3",sx:{mt:4},children:"Contribute"}),Object(w.jsxs)(y.n,{children:["PRs are welcome! Don't forget to fill out a description of your PR. ",Object(w.jsx)("br",{}),"View source on"," ",Object(w.jsx)(y.j,{href:"https://github.com/silviopaganini/tensorflow-study",target:"_blank",children:"Github"}),"."]}),Object(w.jsx)(y.f,{as:"h3",variant:"styles.h3",sx:{mt:4},children:"\u2757 Disclaimer"}),Object(w.jsxs)(y.n,{children:["All experiments were heavily tested on a good spec machine on Chrome and Opera.",Object(w.jsx)("br",{}),"Some experimemts might make your machine fans go crazy \ud83d\ude01 or just not work at all depending on your configuration."]})]})},S=n(2),C=n.n(S),F=n(11),A=n(6),M=n(153),E=n(105),R=n(294),L=y.l,T=function(e){var t=e.children,n=Object(R.a)(e,["children"]);return Object(w.jsx)(L,Object(E.a)(Object(E.a)({as:g.b},n),{},{children:t}))},H=function(){var e=Object(v.f)(),t=Object(f.useState)(!1),n=Object(A.a)(t,2),a=n[0],r=n[1];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(y.e,{as:"nav",sx:{zIndex:100,flexDirection:"column",px:3,py:[5,5,4],background:"linear-gradient(180deg, #111 0%, #222 100%)",position:["fixed","fixed","relative"],minHeight:"100vh",minWidth:["100vw","100vw","230px"],width:"230px",transition:"0.2s left ease-out",left:[a?0:"-100%",a?0:"-100%","0"]},children:Ee.map((function(t){return Object(w.jsx)(T,{variant:"links.nav",onClick:function(){r(!1)},sx:{color:e.pathname===t.path?"green":"primary",pointerEvents:e.pathname===t.path?"none":"visible"},to:t.path,children:t.name},t.name)}))}),Object(w.jsx)(y.k,{onClick:function(){r(!a)},sx:{zIndex:101,position:"fixed",top:2,left:2,display:["block","block","none"]}})]})},z=function(e){var t=e.text,n=void 0===t?"Loading":t;return Object(w.jsx)(y.e,{children:Object(w.jsxs)(y.e,{sx:{alignItems:"center",py:2},children:[Object(w.jsx)(y.m,{variant:"styles.spinner"}),Object(w.jsx)(y.i,{children:n})]})})},W=function(e){var t=e.text,n=void 0===t?"Some error has occurred, please refresh your page":t;return Object(w.jsx)(y.a,{children:Object(w.jsx)(y.e,{sx:{alignItems:"center",py:2},children:Object(w.jsx)(y.n,{children:n})})})},I=function(e){var t=e.children,n=e.error,a=e.modelLoaded,r=e.loadingMessage,c=void 0===r?"Loading":r;return Object(w.jsx)(y.a,{children:n?Object(w.jsx)(W,{}):Object(w.jsx)(w.Fragment,{children:a?t:Object(w.jsx)(z,{text:c})})})},D=[15576649,13715803,31116,3171214,15707,4931442,15276303,16210947,15844367,16670549],_=function(){return window.innerWidth<1024},U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,n=Object(f.useState)(),a=Object(A.a)(n,2),r=a[0],c=a[1];return Object(f.useEffect)((function(){if(e&&!r){var n=new AudioContext,a=n.createMediaStreamSource(e),s=n.createAnalyser();s.smoothingTimeConstant=0,a.connect(s),s.fftSize=t,c(s)}}),[e,t,r]),r},B=function(e){null===e||void 0===e||e.getTracks().forEach((function(t){t.stop(),e.removeTrack(t)}))},N=function(e){var t=Object(f.useState)(),n=Object(A.a)(t,2),a=n[0],r=n[1],c=Object(f.useState)(),s=Object(A.a)(c,2),o=s[0],i=s[1];return Object(f.useEffect)((function(){a||function(){var t=Object(F.a)(C.a.mark((function t(){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.getUserMedia(e);case 3:(n=t.sent).addEventListener("removetrack",(function(){console.log("removetrack")})),r(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),i(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}()()}),[e,a]),[a,o]},q=function(){var e=Object(f.useRef)(null),t=Object(f.useState)(),n=Object(A.a)(t,2),a=n[0],r=n[1],c=Object(f.useState)(!1),s=Object(A.a)(c,2),o=s[0],i=s[1],l=Object(f.useState)(!1),u=Object(A.a)(l,2),d=u[0],b=u[1],j=Object(f.useState)(),h=Object(A.a)(j,2),p=h[0],x=h[1],m=N({video:{width:640,height:360}}),O=Object(A.a)(m,1)[0],g=Object(f.useCallback)((function(e){(function(){var e=Object(F.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=3;break}return x(void 0),e.abrupt("return");case 3:return e.prev=3,i(!0),e.next=7,a.classify(t);case 7:n=e.sent,r=n.map((function(e,t){return Object(w.jsxs)(y.a,{children:[Object(w.jsx)("b",{children:e.className})," - ","".concat(Math.round(100*e.probability),"%")]},t)})),x(r),i(!1),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(3),i(!1),x(void 0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}})()(e)}),[a]),v=Object(f.useCallback)(Object(F.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=r,e.next=4,M.a();case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=12;break;case 8:e.prev=8,e.t2=e.catch(0),console.log(e.t2),b(!0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),[b,r]),k=Object(f.useCallback)((function(){e.current&&O&&(e.current.onloadedmetadata=function(){e.current&&e.current.play(),v()},e.current.srcObject=O)}),[O,v]);return Object(f.useEffect)((function(){return k(),function(){B(O)}}),[k,O]),Object(w.jsxs)(y.c,{as:"section",variant:"layout.section",children:[Object(w.jsx)(y.f,{as:"h2",children:"Webcam object detection"}),Object(w.jsx)(y.f,{as:"h4",variant:"styles.h4",children:'Hold an object in front of your camera and click on "Capture" to analyse the camera feed'}),Object(w.jsx)(y.a,{sx:{position:["absolute","absolute","relative"],top:[0,0,"auto"],left:[0,0,"auto"],width:["100%","100%","auto"],height:["100%","100%","auto"],maxWidth:["auto","auto",640],maxHeight:["auto","auto",360],zIndex:[-1,-1,2]},children:Object(w.jsx)("video",{style:{transform:"scaleX(-1)"},width:_()?window.innerWidth:640,height:_()?window.innerHeight:360,ref:e})}),Object(w.jsxs)(I,{error:d,loadingMessage:"Loading Mobilenet Tensorflow Models",modelLoaded:!!a,children:[Object(w.jsx)(y.b,{sx:{mt:4},onClick:function(){if(e.current)try{g(e.current)}catch(t){console.log(t)}},variant:"primary",children:"Capture"}),o&&Object(w.jsx)(z,{text:"Analysing"}),p&&Object(w.jsx)(y.a,{mt:3,children:p})]})]})},P=function(){var e=Object(f.useRef)(null),t=Object(f.useState)(!1),n=Object(A.a)(t,2),a=n[0],r=n[1],c=Object(f.useState)(),s=Object(A.a)(c,2),o=s[0],i=s[1],l=Object(f.useState)(!1),u=Object(A.a)(l,2),d=u[0],b=u[1],j=Object(f.useState)(0),h=Object(A.a)(j,2),p=h[0],x=h[1],m=Object(f.useState)(),O=Object(A.a)(m,2),g=O[0],v=O[1],k=Object(f.useCallback)((function(e){(function(){var e=Object(F.a)(C.a.mark((function e(t){var n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=4;break}return r(!1),v(void 0),e.abrupt("return");case 4:return e.prev=4,r(!0),e.next=8,o.classify(t);case 8:n=e.sent,a=n.map((function(e,t){return Object(w.jsxs)(y.a,{children:[Object(w.jsx)("b",{children:e.className})," - ","".concat(Math.round(100*e.probability),"%")]},t)})),v(a),r(!1),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(4),r(!1),v(void 0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}})()(e)}),[o]),S=function(){var e=Object(F.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=i,e.next=4,M.a();case 4:e.t1=e.sent,(0,e.t0)(e.t1),r(!1),e.next=13;break;case 9:e.prev=9,e.t2=e.catch(0),console.log(e.t2),b(!0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(f.useEffect)((function(){S()}),[]),Object(w.jsxs)(y.c,{as:"section",variant:"layout.section",children:[Object(w.jsx)(y.f,{as:"h2",children:"Random Image Detection"}),d?Object(w.jsx)(W,{}):o?Object(w.jsxs)(y.c,{children:[Object(w.jsx)(y.g,{onLoad:function(){e.current&&k(e.current)},ref:e,alt:"cat",crossOrigin:"anonymous",src:"https://loremflickr.com/1000/700/nature?lock=".concat(p),sx:{maxHeight:700,width:"auto"}},p),g&&Object(w.jsx)(y.a,{mt:3,children:g}),Object(w.jsx)(y.b,{mt:3,variant:"primary",sx:{pointerEvents:a?"none":"visible",opacity:a?.5:1},onClick:function(){r(!0),v(void 0),x(p+1)},children:a?"Loading...":"Try a new image"})]}):Object(w.jsx)(z,{text:"Loading Mobilenet Tensorflow Models"})]})},X=n(21),J=n(171),$=n(287),G=["left","up","down","center","right"].sort((function(e,t){return e.localeCompare(t)})),K=function(){var e=Object(f.useRef)(null),t=Object(f.useState)(),n=Object(A.a)(t,2),r=n[0],c=n[1],s=Object(f.useState)(),o=Object(A.a)(s,2),i=o[0],l=o[1],u=Object(f.useState)(),d=Object(A.a)(u,2),b=d[0],j=d[1],h=Object(f.useState)(!1),p=Object(A.a)(h,2),x=p[0],m=p[1],O=Object(f.useState)([]),g=Object(A.a)(O,2),v=g[0],k=g[1],S=Object(f.useState)(!1),E=Object(A.a)(S,2),R=E[0],L=E[1],T=Object(f.useState)(!1),H=Object(A.a)(T,2),I=H[0],D=H[1],_=N({video:{width:640,height:360}}),U=Object(A.a)(_,1)[0],q=function(){var t=Object(F.a)(C.a.mark((function t(n){var a,c,s;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.current){t.next=2;break}return t.abrupt("return");case 2:m(!0),a=0;case 4:if(!(a<15)){t.next=12;break}return(c=null===r||void 0===r?void 0:r.infer(e.current))&&(null===i||void 0===i||i.addExample(c,n)),a++,t.next=10,Object(J.b)();case 10:t.next=4;break;case 12:s=[].concat(Object(X.a)(v),[n]).sort((function(e,t){return e.localeCompare(t)})),k(s),m(!1),s.toString()===G.toString()&&L(!0);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),P=function(){var t=Object(F.a)(C.a.mark((function t(){var n,c;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i&&e.current){t.next=2;break}return t.abrupt("return");case 2:if(!(i.getNumClasses()>0)){t.next=8;break}return n=null===r||void 0===r?void 0:r.infer(e.current),t.next=6,null===i||void 0===i?void 0:i.predictClass(n);case 6:c=t.sent,j(Object(w.jsxs)(y.a,{children:[Object(w.jsx)(y.a,{mb:2,sx:{fontWeight:"bold"},children:c.label}),Object.keys(c.confidences).map((function(e,t){return Object(w.jsxs)(y.a,{children:[e,": ",c.confidences[e]]},t)}))]}));case 8:a=window.requestAnimationFrame(P);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),K=Object(f.useCallback)(Object(F.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=c,e.next=4,M.a();case 4:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=l,e.next=9,$.a();case 9:e.t3=e.sent,(0,e.t2)(e.t3),e.next=17;break;case 13:e.prev=13,e.t4=e.catch(0),console.log(e.t4),D(!0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])}))),[D,l,c]),V=Object(f.useCallback)((function(){e.current&&U&&(e.current.onloadedmetadata=function(){e.current&&e.current.play(),K()},e.current.srcObject=U)}),[U,K]);return Object(f.useEffect)((function(){return e.current&&V(),function(){a&&window.cancelAnimationFrame(a),a=void 0,B(U)}}),[e,U,V]),Object(w.jsxs)(y.c,{as:"section",variant:"layout.section",children:[Object(w.jsx)(y.f,{as:"h2",children:"Transfer Learning"}),Object(w.jsx)(y.f,{as:"h4",variant:"styles.h4",children:"Teach the machine all five head positions to start the position analysis."}),I?Object(w.jsx)(W,{}):Object(w.jsxs)(w.Fragment,{children:[(!i||!r)&&Object(w.jsx)(z,{text:"Loading Mobilenet and KNN Tensorflow Models"}),Object(w.jsxs)(y.a,{sx:{maxWidth:640},children:[Object(w.jsx)(y.a,{children:Object(w.jsx)("video",{style:{transform:"scaleX(-1)"},width:640,height:360,ref:e})}),i&&r&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(y.a,{mt:3,sx:{opacity:x?.5:1,pointerEvents:x?"none":"visible"},children:[!R&&Object(w.jsx)(y.a,{children:Object(w.jsxs)(y.e,{sx:{mt:3,justifyContent:"space-between"},children:[Object(w.jsx)(y.b,{onClick:function(){return q("left")},variant:"secondary",children:"Left"}),Object(w.jsx)(y.b,{onClick:function(){return q("up")},variant:"secondary",children:"Up"}),Object(w.jsx)(y.b,{onClick:function(){return q("center")},variant:"secondary",children:"Center"}),Object(w.jsx)(y.b,{onClick:function(){return q("down")},variant:"secondary",children:"Down"}),Object(w.jsx)(y.b,{onClick:function(){return q("right")},variant:"secondary",children:"Right"})]})}),R&&Object(w.jsx)(y.b,{variant:"primary",onClick:function(){P()},mt:2,children:"Detect head position"})]}),Object(w.jsx)(y.a,{mt:3,children:b})]})]})]})]})},V=n(222),Y=n(158),Q=n(48),Z=0,ee=new Q.g,te=new Q.a,ne=[],ae=new Q.b,re=[],ce={position:"absolute",bottom:0,right:0,"& > div":{position:"static !important"}},se=function(){var e=Object(f.useRef)(null),t=Object(f.useRef)(null),n=Object(f.useRef)(null),a=Object(f.useState)(!1),l=Object(A.a)(a,2),u=l[0],d=l[1],b=Object(f.useState)(!1),j=Object(A.a)(b,2),h=j[0],p=j[1],x=N({video:{facingMode:"user",width:640,height:360}}),m=Object(A.a)(x,1)[0],O=Object(f.useCallback)(Object(F.a)(C.a.mark((function n(){var a,l,u,d;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,r&&e.current&&t.current){n.next=4;break}return Z=requestAnimationFrame(O),n.abrupt("return");case 4:return n.next=6,r.estimateFaces({returnTensors:!1,flipHorizontal:!1,input:e.current});case 6:a=n.sent,ne=[],re=[],l=t.current,u=l.width,d=l.height,null===a||void 0===a||a.forEach((function(e){var t=e.annotations;Object.keys(t).forEach((function(e,n){ae.setHex(D[n%(D.length-1)]),t[e].forEach((function(e){ne.push(e[0]-u/2,d/2-e[1],-e[2]),re.push(ae.r,ae.g,ae.b)}))}))})),te.setAttribute("position",new Q.c(ne,3)),te.setAttribute("color",new Q.c(re,3)),te.computeBoundingSphere(),o.geometry.attributes.position.needsUpdate=!0,s.render(ee,c),i.update(),n.next=22;break;case 19:n.prev=19,n.t0=n.catch(0),console.log(n.t0);case 22:Z=requestAnimationFrame(O);case 23:case"end":return n.stop()}}),n,null,[[0,19]])}))),[]),g=Object(f.useCallback)(Object(F.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=4,V.b(V.a.mediapipeFacemesh);case 4:r=e.sent,p(!1),O(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),p(!1),d(!0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),[O]);return Object(f.useEffect)((function(){if(e.current&&m)return e.current.srcObject=m,e.current.onloadedmetadata=function(){var a;if(null===(a=e.current)||void 0===a||a.play(),t.current){var r=t.current,l=r.width,u=r.height;(c=new Q.d(60,l/u,.1,1e3)).position.z=l/2;var d=(new Q.h).load("https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/sprites/disc.png");(s=new Q.i({canvas:t.current,alpha:!0})).setSize(l,u);var b,j=new Q.f({size:10,vertexColors:!0,map:d});if(o=new Q.e(te,j),ee.add(o),!i)i=Object(Y.a)(),null===(b=n.current)||void 0===b||b.appendChild(i.dom);g()}},function(){var e;cancelAnimationFrame(Z),B(m),null===(e=i)||void 0===e||e.end()}}),[m,g,e,t,n]),Object(w.jsxs)(y.c,{as:"section",variant:"layout.section",children:[Object(w.jsx)(y.f,{as:"h2",children:"Face Mesh"}),Object(w.jsxs)(y.f,{as:"h4",variant:"styles.h4",children:["Create the face mesh of the detected face on the camera feed. ",Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),"Each color group represents one feature of the face being mapped, which means we can get the positons individually."]}),u?Object(w.jsx)(W,{}):Object(w.jsxs)(w.Fragment,{children:[h&&Object(w.jsx)(y.a,{mt:2,children:Object(w.jsx)(z,{text:"Loading Face Landmarks Model"})}),Object(w.jsxs)(y.a,{sx:{position:"relative",mt:2},children:[Object(w.jsx)("video",{style:{opacity:.4},ref:e,width:640,height:360}),Object(w.jsx)("canvas",{ref:t,style:{position:"absolute",top:0,left:0},width:640,height:360})]})]}),Object(w.jsx)(y.a,{sx:ce,ref:n})]})},oe=n(288),ie=function(){var e=Object(f.useState)(),t=Object(A.a)(e,2),n=t[0],a=t[1],r=Object(f.useState)(),c=Object(A.a)(r,2),s=c[0],o=c[1],i=Object(f.useState)(),l=Object(A.a)(i,2),u=l[0],d=l[1],b=Object(f.useState)(!1),j=Object(A.a)(b,2),h=j[0],p=j[1],x=Object(f.useState)(!1),m=Object(A.a)(x,2),O=m[0],g=m[1],v=Object(f.useState)(),k=Object(A.a)(v,2),S=k[0],M=k[1],E=Object(f.useState)(),R=Object(A.a)(E,2),L=R[0],T=R[1],H=Object(f.useState)("This is really the most useless talk I have ever watched"),I=Object(A.a)(H,2),D=I[0],_=I[1],U=Object(f.useState)(!1),B=Object(A.a)(U,2),N=B[0],q=B[1],P=function(){var e=Object(F.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.t0=o,e.next=5,Object(oe.a)(.9,[]);case 5:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=a,e.next=10,Object(J.a)("https://storage.googleapis.com/tfjs-models/tfjs/sentiment_cnn_v1/model.json");case 10:return e.t3=e.sent,(0,e.t2)(e.t3),e.t4=d,e.next=15,fetch("https://storage.googleapis.com/tfjs-models/tfjs/sentiment_cnn_v1/metadata.json");case 15:return e.next=17,e.sent.json();case 17:e.t5=e.sent,(0,e.t4)(e.t5),p(!1),e.next=25;break;case 22:e.prev=22,e.t6=e.catch(0),q(!0);case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(F.a)(C.a.mark((function e(t){var a,r,c,o,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),u&&n){e.next=3;break}return e.abrupt("return");case 3:return g(!0),M(void 0),T(void 0),a=D.trim().toLowerCase().replace(/(\.|,|!\?)/g,"").split(" "),r=a.map((function(e){var t=u.word_index[e];return"undefined"===typeof t?2:t+u.index_from})),c=new Array(u.max_len-r.length).fill(0).concat(r),o=Object(J.c)(c,[1,u.max_len]),i=n.predict(o),M(i.dataSync()[0]),i.dispose(),e.t0=T,e.next=16,null===s||void 0===s?void 0:s.classify([D]);case 16:e.t1=e.sent,(0,e.t0)(e.t1),g(!1);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.useEffect)((function(){P()}),[]),Object(w.jsxs)(y.c,{as:"section",variant:"layout.section",children:[Object(w.jsx)(y.f,{as:"h2",children:"Sentiment analysis"}),Object(w.jsx)(y.f,{as:"h4",variant:"styles.h4",children:"Analyse text sentiment and toxicity."}),N?Object(w.jsx)(W,{}):Object(w.jsxs)(w.Fragment,{children:[h&&Object(w.jsx)(z,{text:"Loading Sentiment and Toxicity models"}),!h&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(y.a,{as:"form",sx:{position:"relative"},onSubmit:X,children:[Object(w.jsx)(y.h,{maxLength:100,autoComplete:"off",mt:3,onChange:function(e){_(e.currentTarget.value)},value:D,name:"input"}),Object(w.jsxs)(y.a,{sx:{position:"absolute",bottom:-25,right:"2px",fontSize:0},children:[D.length,"/100"]})]}),S&&L&&Object(w.jsxs)(y.a,{mt:2,children:[Object(w.jsxs)(y.n,{children:[Object(w.jsx)(y.f,{mt:4,as:"h3",children:"Sentiment Score:"}),Object(w.jsx)(y.n,{as:"span",mt:3,sx:{color:S>.66?"green":S<.33?"red":"orange"},children:S})]}),Object(w.jsxs)(y.n,{mt:2,children:[Object(w.jsx)(y.f,{mt:4,as:"h3",children:"Toxicity:"}),null===L||void 0===L?void 0:L.map((function(e,t){return Object(w.jsxs)(y.a,{mt:2,pl:3,sx:{opacity:e.results.every((function(e){return e.match}))?1:.4},children:[Object(w.jsx)("b",{children:e.label}),":",e.results.map((function(e,t){return Object(w.jsxs)(y.a,{mt:2,children:[Object(w.jsxs)(y.n,{sx:{pl:4},children:["Probabilities: ",JSON.stringify(e.probabilities)]}),Object(w.jsxs)(y.n,{sx:{pl:4},children:["Match:"," ",Object(w.jsx)(y.n,{as:"span",sx:{color:e.match?"green":"text",fontWeight:e.match?"bold":"normal"},children:JSON.stringify(e.match)})]})]},t)}))]},t)}))]})]}),Object(w.jsx)(y.b,{sx:{opacity:O?.4:1,pointerEvents:O?"none":"visible"},mt:4,onClick:X,children:O?"Loading...":"Analyse"})]})]})]})},le=n(289),ue=0,de=function(){var e=N({audio:!0}),t=Object(A.a)(e,1)[0],n=U(t),a=Object(f.useState)(),r=Object(A.a)(a,2),c=r[0],s=r[1],o=Object(f.useRef)(null),i=Object(f.useState)(!1),l=Object(A.a)(i,2),u=l[0],d=l[1],b=Object(f.useState)(),j=Object(A.a)(b,2),h=j[0],p=j[1],x=Object(f.useCallback)((function(){if(n&&o.current){var e=o.current.getContext("2d");if(e){var t=new Uint8Array(n.frequencyBinCount);n.getByteFrequencyData(t);var a=e.getImageData(1,0,o.current.width-1,o.current.height);e.putImageData(a,0,0),function(e,t,n){for(var a=0;a<e.length;a++){var r=2*e[a]*255,c=Math.max(0,255*r);c=Math.pow(c,3),c=Math.round(255*c);var s="rgb(".concat(c,",").concat(255-c,",").concat(255-c,")");t.beginPath(),t.strokeStyle=s,t.moveTo(n.width-1,n.height-a*(n.height/e.length)),t.lineTo(n.width-1,n.height-a*n.height/e.length+n.height/e.length),t.stroke()}}(t,e,o.current),ue=requestAnimationFrame(x)}else ue=requestAnimationFrame(x)}else ue=requestAnimationFrame(x)}),[n]),m=Object(f.useCallback)(Object(F.a)(C.a.mark((function e(){var t,n,a,r,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.location.origin,n="".concat(t,"/model/model.json"),a="".concat(t,"/model/metadata.json"),r=le.a("BROWSER_FFT",void 0,n,a),e.next=7,r.ensureModelLoaded();case 7:return s(r),c=r.wordLabels(),x(),e.next=12,r.listen((function(e){var t=Object.keys(c).reduce((function(t,n,a){var r=c[a]+": "+Number(e.scores[a]).toFixed(2);return t.push(Object(w.jsx)(y.a,{sx:{opacity:e.scores[a]>.7?1:.5},children:r},n)),t}),[]);p(t)}),{includeSpectrogram:!1,probabilityThreshold:.75,invokeCallbackOnNoiseAndUnknown:!0,overlapFactor:.5});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),d(!0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))),[d,x]);return Object(f.useEffect)((function(){if(n&&o.current)return m(),function(){B(t),cancelAnimationFrame(ue)}}),[o,n,m,t]),Object(w.jsxs)(y.c,{as:"section",variant:"layout.section",children:[Object(w.jsx)(y.f,{as:"h2",children:"Audio Analysis"}),Object(w.jsxs)(y.f,{as:"h4",variant:"styles.h4",children:["Model trained to detect"," ",Object(w.jsx)(y.n,{as:"span",sx:{color:"green"},children:'"Yes"'}),"and"," ",Object(w.jsx)(y.n,{as:"span",sx:{color:"green"},children:'"No"'})," ","instructions,"," ",Object(w.jsx)(y.n,{as:"span",sx:{color:"green"},children:"clapping"})," ","and"," ",Object(w.jsx)(y.n,{as:"span",sx:{color:"green"},children:"typing"})," ","noises using"," ",Object(w.jsx)(y.j,{href:"https://teachablemachine.withgoogle.com",target:"_blank",children:"Teachable Machine"})," ","from Google."]}),Object(w.jsx)("canvas",{ref:o,width:800,height:500}),Object(w.jsx)(I,{error:u,loadingMessage:"Loading SpeechCommand Models",modelLoaded:!!c,children:Object(w.jsx)(y.a,{children:h||"listening..."})})]})},be=n(291),je=void 0,he=0,fe=new Q.g,pe=new Q.a,xe=[],me=new Q.b,Oe=[],ge={position:"absolute",bottom:0,right:0,"& > div":{position:"static !important"}},ve=function(){var e=Object(f.useRef)(null),t=Object(f.useRef)(null),n=Object(f.useRef)(null),a=Object(f.useState)(!0),r=Object(A.a)(a,2),c=r[0],s=r[1],o=N({video:{width:640,height:360}}),i=Object(A.a)(o,1)[0],j=Object(f.useState)(!1),h=Object(A.a)(j,2),p=h[0],x=h[1],m=Object(f.useCallback)(Object(F.a)(C.a.mark((function n(){var a,r,c,s,o;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=t.current,!n.t0){n.next=6;break}return n.next=5,null===(a=je)||void 0===a?void 0:a.estimateHands(t.current);case 5:n.t0=n.sent;case 6:r=n.t0,e.current&&(xe=[],Oe=[],c=e.current,s=c.width,o=c.height,null===r||void 0===r||r.forEach((function(e){Object.keys(e.annotations).forEach((function(t,n){me.setHex(D[n%(D.length-1)]),e.annotations[t].forEach((function(e){xe.push(e[0]-s/2,o/2-e[1],-e[2]),Oe.push(me.r,me.g,me.b)}))}))})),pe.setAttribute("position",new Q.c(xe,3)),pe.setAttribute("color",new Q.c(Oe,3)),pe.computeBoundingSphere(),d.geometry.attributes.position.needsUpdate=!0),u.render(fe,l),b.update(),he=requestAnimationFrame(m),n.next=16;break;case 13:n.prev=13,n.t1=n.catch(0),console.log(n.t1);case 16:case"end":return n.stop()}}),n,null,[[0,13]])}))),[]),O=Object(f.useCallback)(Object(F.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,be.a();case 4:je=e.sent,s(!1),m(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),x(!0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),[s,m]);return Object(f.useEffect)((function(){if(t.current&&e.current&&i){t.current.srcObject=i,t.current.onloadedmetadata=function(){t.current.play(),O()};var a=e.current,r=a.width,c=a.height;(l=new Q.d(60,r/c,.1,1e3)).position.z=r/2;var s=(new Q.h).load("https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/sprites/disc.png");(u=new Q.i({canvas:e.current,alpha:!0})).setSize(r,c);var o,j=new Q.f({size:20,vertexColors:!0,map:s});if(d=new Q.e(pe,j),fe.add(d),!b)b=Object(Y.a)(),null===(o=n.current)||void 0===o||o.appendChild(b.dom);return function(){cancelAnimationFrame(he),B(i),he=0,b.end()}}}),[e,t,i,O]),Object(w.jsxs)(y.c,{as:"section",variant:"layout.section",children:[Object(w.jsx)(y.f,{as:"h2",children:"Hand Mesh"}),Object(w.jsxs)(y.f,{as:"h4",variant:"styles.h4",children:["Put your hand where the camera can see and start tracking and tracing your hand mesh.",Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),"Each color group represents one feature of the hand being mapped, which means we can get the positons individually."]}),p?Object(w.jsx)(W,{}):Object(w.jsxs)(w.Fragment,{children:[c&&Object(w.jsx)(y.a,{mt:2,children:Object(w.jsx)(z,{text:"Loading Hand Pose Model"})}),Object(w.jsxs)(y.a,{sx:{mt:2,position:"relative"},children:[Object(w.jsx)("video",{style:{opacity:.4,transform:"scaleX(-1)"},ref:t,width:640,height:360}),Object(w.jsx)("canvas",{style:{transform:"scaleX(-1)",position:"absolute",top:0,left:0},ref:e,width:640,height:360})]})]}),Object(w.jsx)(y.a,{sx:ge,ref:n})]})},ye=n(292),we=640,ke=360,Se=0,Ce=null,Fe={position:"absolute",bottom:0,right:0,"& > div":{position:"static !important"}},Ae=function(){var e=Object(f.useRef)(null),t=Object(f.useRef)(null),n=Object(f.useRef)(null),a=Object(f.useState)(!0),r=Object(A.a)(a,2),c=r[0],s=r[1],o=Object(f.useState)(!1),i=Object(A.a)(o,2),l=i[0],u=i[1],d=N({video:{width:we,height:ke}}),b=Object(A.a)(d,1)[0],p=Object(f.useCallback)(Object(F.a)(C.a.mark((function n(){return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!(Ce&&t.current&&e.current)){n.next=10;break}return Ce.save(),Ce.scale(-1,1),Ce.drawImage(t.current,0,0,-640,ke),Ce.restore(),n.next=8,j.detect(e.current);case 8:n.sent.forEach((function(e){if(Ce){Ce.beginPath(),Ce.strokeRect(e.bbox[0],e.bbox[1],e.bbox[2],e.bbox[3]),Ce.stroke(),Ce.font='14px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"';var t="".concat(e.class,": ").concat(Math.round(100*e.score),"%"),n=Ce.measureText(t).width;Ce.fillStyle="#000",Ce.fillRect(e.bbox[0]-1,e.bbox[1]-30,n+10,30),Ce.fillStyle="#fff",Ce.fillText(t,e.bbox[0]+5,e.bbox[1]-10)}}));case 10:h.update(),Se=requestAnimationFrame(p),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(0),console.log(n.t0);case 17:case"end":return n.stop()}}),n,null,[[0,14]])}))),[]),x=Object(f.useCallback)(Object(F.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,ye.load();case 4:j=e.sent,s(!1),p(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),u(!0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),[s,p]);return Object(f.useEffect)((function(){if(t.current&&e.current&&b){var a;if(t.current.srcObject=b,t.current.onloadedmetadata=function(){var e;null===t||void 0===t||null===(e=t.current)||void 0===e||e.play(),x()},Ce=e.current.getContext("2d"),!h)h=Object(Y.a)(),null===(a=n.current)||void 0===a||a.appendChild(h.dom);return function(){cancelAnimationFrame(Se),B(b),Se=0}}}),[e,t,b,x]),Object(w.jsxs)(y.c,{as:"section",variant:"layout.section",children:[Object(w.jsx)(y.f,{as:"h2",children:"Real-time Object Detection"}),Object(w.jsx)(y.f,{as:"h4",variant:"styles.h4",children:"Real-time object detection through webcam feed using coco-ssd Model"}),l?Object(w.jsx)(W,{}):Object(w.jsxs)(w.Fragment,{children:[c&&Object(w.jsx)(z,{text:"Loading Coco-SSD Model"}),Object(w.jsxs)(y.a,{sx:{position:"relative"},children:[Object(w.jsx)("video",{style:{opacity:.4,transform:"scaleX(-1)"},ref:t,width:we,height:ke}),Object(w.jsx)("canvas",{style:{position:"absolute",top:0,left:0},ref:e,width:we,height:ke})]})]}),Object(w.jsx)(y.a,{sx:Fe,ref:n})]})},Me=n(337).homepage,Ee=[{path:Me,component:k,name:"Home",exact:!0},{path:"".concat(Me,"image-detection"),component:P,name:"Random Image Detection"},{path:"".concat(Me,"realtime-obj-detection"),component:Ae,name:"Real-time Detection"},{path:"".concat(Me,"webcam"),component:q,name:"Snapshot Detection"},{path:"".concat(Me,"transfer-learning"),component:K,name:"Transfer Learning"},{path:"".concat(Me,"sentiment"),component:ie,name:"Sentiment Analysis"},{path:"".concat(Me,"facemesh"),component:se,name:"Face Mesh"},{path:"".concat(Me,"hand-pose"),component:ve,name:"Hand Mesh"},{path:"".concat(Me,"audio-analysis"),component:de,name:"Audio analysis"}],Re=function(){return Object(w.jsx)(g.a,{children:Object(w.jsxs)(y.e,{children:[Object(w.jsx)(H,{}),Object(w.jsx)(v.c,{children:Ee.map((function(e,t){var n=e.exact,a=e.path,r=e.component;return Object(w.jsx)(v.a,{exact:n,path:a,children:Object(w.jsx)(r,{})},t)}))})]})})},Le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,341)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},Te={outline:"none"},He={space:[0,4,8,16,32,64,128,256,512],fonts:{body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',heading:"inherit",monospace:"Menlo, monospace"},breakpoints:["40em","56em","64em"],fontSizes:[12,14,16,20,24,32,48,64,96],fontWeights:{body:400,heading:700,bold:700},lineHeights:{body:1.5,heading:1.5},sizes:{container:"100%"},layout:{section:{pt:[5,5,4],px:4,width:"100%"}},buttons:{menu:Object(E.a)({},Te),primary:Object(E.a)(Object(E.a)({},Te),{},{cursor:"pointer",bg:"green",color:"secondary",transition:"all .1s ease-out","&:hover":{bg:"secondary",color:"green"}}),secondary:Object(E.a)(Object(E.a)({},Te),{},{bg:"secondary",color:"white",cursor:"pointer"})},colors:{text:"#FFF",background:"#333",primary:"#FFF",gray:"#f0f0f0",secondary:"#333",green:"rgb(99, 255, 203)",muted:"#999",code:"#444"},links:{text:{color:"green","&:hover":{textDecoration:"none"}},nav:{fontSize:[2,2,0],mr:4,my:[3,3,2],color:"primary",transition:"all 0.15s ease-out","&:active":{color:"green"},"&:focus":{color:"green"},"&:hover":{opacity:.5}}},text:{heading:{mb:3},default:{mb:3}},styles:{root:{fontFamily:"body",lineHeight:"body",fontWeight:"body",letterSpacing:"0.6px",bg:"black"},h1:{color:"text",fontFamily:"heading",lineHeight:"heading",fontWeight:"heading",fontSize:5},h2:{fontFamily:"heading",lineHeight:"heading",fontWeight:"heading",fontSize:4},h3:{color:"muted",fontFamily:"heading",lineHeight:"heading",fontWeight:"heading",fontSize:3,variant:"text.heading"},h4:{color:"muted",fontFamily:"heading",lineHeight:"heading",fontWeight:"body",fontSize:2,variant:"text.heading"},h5:{color:"text",fontFamily:"heading",lineHeight:"heading",fontWeight:"heading",fontSize:1},h6:{color:"text",fontFamily:"heading",lineHeight:"heading",fontWeight:"heading",fontSize:0},p:{color:"text",fontFamily:"body",fontWeight:"body",lineHeight:"body"},a:{color:"primary"},pre:{my:3,p:3,fontFamily:"monospace",overflowX:"auto",code:{color:"code"},maxWidth:"700px",borderRadius:"7px",bg:"gray",color:"black"},spinner:{size:20,mr:2},code:{fontFamily:"monospace",fontSize:"inherit"},table:{width:"100%",borderCollapse:"separate",borderSpacing:0},th:{textAlign:"left",borderBottomStyle:"solid"},td:{textAlign:"left",borderBottomStyle:"solid"},img:{maxWidth:"100%"},hr:{my:4,bg:"muted",opacity:.3,height:"1px"}}};m.a.render(Object(w.jsx)(p.a.StrictMode,{children:Object(w.jsx)(O.a,{theme:He,children:Object(w.jsx)(Re,{})})}),document.getElementById("root")),Le()}},[[338,1,2]]]);
//# sourceMappingURL=main.9be339bc.chunk.js.map